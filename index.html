<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hanzi Network</title>

  <!-- vis-network (vis.js) -->
  <link rel="stylesheet" href="https://unpkg.com/vis-network/styles/vis-network.min.css">
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

  <style>
    :root {
      --bg: #0f1220;
      --panel: #151a2f;
      --border: #273055;
      --text: #e5e9f0;
      --muted: #9aa5c2;
      --accent: #7aa2f7;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
    }

    .app {
      display: grid;
      grid-template-rows: auto 1fr;
      height: 100%;
    }

    .toolbar {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, #11162a, #0e1326);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .toolbar > * { margin-right: 12px; }
    .toolbar > *:last-child { margin-right: 0; }

    .toolbar label {
      font-size: 14px;
      color: var(--muted);
    }

    .toolbar input[type="text"] {
      width: 360px;
      max-width: 60vw;
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--panel);
      color: var(--text);
      outline: none;
      font-size: 16px;
      letter-spacing: 0.02em;
    }

    .toolbar button {
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--panel);
      color: var(--text);
      cursor: pointer;
      font-weight: 600;
    }

    .toolbar button:hover {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgb(122 162 247 / 20%);
    }

    #graph {
      height: calc(100vh - 58px);
      width: 100%;
      background: radial-gradient(1200px 1200px at 60% -20%, #1a1f39 0%, #0f1220 60%);
      position: relative;
      overflow: hidden;
    }

    .empty-hint {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: var(--muted);
      font-size: 14px;
      text-align: center;
      pointer-events: none;
    }

    .context-dialog {
      position: absolute;
      min-width: 220px;
      max-width: 280px;
      padding: 10px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--panel);
      color: var(--text);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      z-index: 20;
    }
    .context-title {
      font-weight: 700;
      margin: 0 0 8px 0;
      font-size: 14px;
    }
    .menu-list { display: block; }
    .menu-item {
      display: block;
      width: 100%;
      text-align: left;
      margin-top: 6px;
      padding: 6px 8px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #1a203a;
      color: var(--text);
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
    }
    .menu-item:first-child { margin-top: 0; }
    .menu-item:hover { border-color: var(--accent); }

    .info-panel {
      position: fixed;
      top: 12px;
      right: 12px;
      min-width: 240px;
      max-width: 320px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--panel);
      color: var(--text);
      padding: 10px 12px;
      box-shadow: 0 10px 28px rgba(0,0,0,0.35);
      z-index: 30;
    }
    .info-title {
      font-weight: 700;
      font-size: 14px;
      margin: 0 0 8px 0;
    }
    .info-row { display: flex; align-items: baseline; margin-top: 6px; }
    .info-row .k { font-size: 12px; color: var(--muted); min-width: 64px; }
    .info-row .v { font-size: 14px; margin-left: 8px; word-break: break-word; }
  </style>
</head>
<body>
  <div class="app">
    <div class="toolbar">
      <label for="charInput">Characters:</label>
      <input id="charInput" type="text" inputmode="text" maxlength="300" placeholder="例如：你好世界…" aria-label="Chinese characters">
      <button id="displayBtn" type="button">Display</button>
      <span id="status" aria-live="polite" style="font-size:12px;color:var(--muted)"></span>
    </div>

    <div id="graph"></div>
    <div id="emptyHint" class="empty-hint">
      Enter characters and click “Display”. Right‑click a node to open its menu.
    </div>

    <div id="infoPanel" class="info-panel" aria-live="polite" hidden>
      <div class="info-title">Character info</div>
      <div class="info-row"><span class="k">Char</span><span id="infoChar" class="v"></span></div>
      <div class="info-row"><span class="k">Radical</span><span id="infoRadical" class="v"></span></div>
      <div class="info-row"><span class="k">Rank</span><span id="infoRank" class="v"></span></div>
      <div class="info-row"><span class="k">Pinyin</span><span id="infoPinyin" class="v"></span></div>
      <div class="info-row"><span class="k">English</span><span id="infoEnglish" class="v"></span></div>
    </div>
  </div>
  <script type="module" src="main.js"></script>
</body>
</html>
